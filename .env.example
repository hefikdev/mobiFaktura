# ===================================
# mobiFaktura Environment Configuration
# ===================================
# ONE FILE FOR ALL ENVIRONMENTS
# - Development: Keep default values (localhost, development)
# - Production: Replace values marked with [CHANGE FOR PRODUCTION]
# 
# SECURITY: Never commit this file to version control!
# .env is in .gitignore - keep secrets here safely
# ===================================

# ============================================
# ENVIRONMENT MODE - Change for deployment
# ============================================
# Options: development | production
NODE_ENV=development

# ============================================
# APPLICATION & DOMAIN SETTINGS
# ============================================
# Public URL where the application is accessible
# [CHANGE FOR PRODUCTION] Set to your actual domain
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Cookie domain (must match your domain)
# Development: localhost
# Production: yourdomain.com (NO http:// or https://)
# [CHANGE FOR PRODUCTION]
COOKIE_DOMAIN=localhost

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string
# For local dev: use 'localhost'
# For Docker: use 'postgres' as hostname
# [CHANGE FOR PRODUCTION] Use strong password
DATABASE_URL=postgres://mobifaktura:mobifaktura_secret@localhost:5432/mobifaktura

# PostgreSQL credentials (only used by Docker)
# [CHANGE FOR PRODUCTION] Use strong passwords
POSTGRES_USER=mobifaktura
POSTGRES_PASSWORD=mobifaktura_secret
POSTGRES_DB=mobifaktura

# ============================================
# MinIO S3 STORAGE CONFIGURATION
# ============================================
# S3-compatible object storage for file uploads
# For local dev: use 'localhost'
# For Docker: use 'minio' as hostname
MINIO_ENDPOINT=localhost
MINIO_PORT=9000

# MinIO credentials
# [CHANGE FOR PRODUCTION] Use strong passwords
MINIO_ACCESS_KEY=mobifaktura_minio
MINIO_SECRET_KEY=mobifaktura_minio_secret

# MinIO bucket configuration
MINIO_BUCKET=invoices
MINIO_USE_SSL=false

# ============================================
# AUTHENTICATION & SECURITY (CRITICAL!)
# ============================================

# JWT Secret - MUST be set before app starts!
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# [CHANGE FOR PRODUCTION] Generate a new strong secret
# Current value is for development only
JWT_SECRET=dev-super-secret-jwt-key-min-32-chars-long-here

# Session cookie name
SESSION_COOKIE_NAME=mobifaktura_session

# ============================================
# EMERGENCY SUPER ADMIN (CRITICAL!)
# ============================================
# Used for emergency access when all admin accounts are locked/lost
# Access via /login - system validates credentials against these values
# [CHANGE FOR PRODUCTION] Use strong password, store securely
# SECURITY WARNING: Do NOT share these credentials, never commit real values
SUPER_ADMIN_EMAIL=emergency@yourdomain.com
SUPER_ADMIN_PASSWORD=YourSecurePassword123!

# ============================================
# BACKUP CONFIGURATION
# ============================================
# Cron schedule for automatic backups
# Format: minute hour day month weekday
# Default: 0 2 * * * means 2 AM daily
BACKUP_CRON_SCHEDULE=0 2 * * *

# Days to retain backups before deletion
BACKUP_RETENTION_DAYS=30

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: debug, info, warn, error
# Development: use 'debug' for more details
# Production: use 'info' or 'warn' for less noise
LOG_LEVEL=info


# Server-side VAPID keys (keep private!)
VAPID_PUBLIC_KEY=BCs99pOIkLiWxD4bVgiQMbNRs4uhpNPPbenwuVQY93tuDjkKjSWx4Gw0fxx6PAYRwSSucSVYNr84R_skRrmQWM0
VAPID_PRIVATE_KEY=oCUaZYlS-2uhcbR0C6X8mFRtBRjsGpF8P9S4z-YxYhw
VAPID_SUBJECT=mailto:admin@mobifaktura.pl

# Client-side public key (exposed to browser)
NEXT_PUBLIC_VAPID_PUBLIC_KEY=BCs99pOIkLiWxD4bVgiQMbNRs4uhpNPPbenwuVQY93tuDjkKjSWx4Gw0fxx6PAYRwSSucSVYNr84R_skRrmQWM0

# ===================================
# SETUP INSTRUCTIONS
# ===================================
#
# LOCAL DEVELOPMENT (this file):
# 1. Keep NODE_ENV=development
# 2. Use localhost values for COOKIE_DOMAIN, DATABASE_URL, MINIO_ENDPOINT
# 3. JWT_SECRET can stay as is
# 4. Run: npm run dev
#
# DOCKER DEVELOPMENT (docker-compose.dev.yml):
# 1. Keep NODE_ENV=development
# 2. DATABASE_URL: postgres://mobifaktura:mobifaktura_secret@postgres:5432/mobifaktura
# 3. MINIO_ENDPOINT: minio
# 4. Run: docker-compose -f docker-compose.dev.yml up
#
# PRODUCTION (docker-compose.yml):
# 1. Change NODE_ENV=production
# 2. NEXT_PUBLIC_APP_URL: https://yourdomain.com
# 3. COOKIE_DOMAIN: yourdomain.com
# 4. DATABASE_URL: postgres://user:password@host:5432/mobifaktura (change password!)
# 5. MINIO_*: Update credentials and endpoint
# 6. JWT_SECRET: Generate new secure value
# 7. SUPER_ADMIN_*: Set real credentials
# 8. Run: docker-compose up -d
# ===================================
