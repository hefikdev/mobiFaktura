# ===================================
# mobiFaktura Environment Configuration
# ===================================
# ONE FILE FOR ALL ENVIRONMENTS
# - Development: Keep default values (localhost, development)
# - Production: Replace values marked with [CHANGE FOR PRODUCTION]
# 
# SECURITY: Never commit this file to version control!
# .env is in .gitignore - keep secrets here safely
# ===================================

# ============================================
# ENVIRONMENT MODE - Change for deployment
# ============================================
# Options: development | production
NODE_ENV=development

# ============================================
# APPLICATION & DOMAIN SETTINGS
# ============================================
# Public URL where the application is accessible
# [CHANGE FOR PRODUCTION] Set to your actual domain
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Cookie domain (must match your domain)
# Development: localhost
# Production: yourdomain.com (NO http:// or https://)
# [CHANGE FOR PRODUCTION]
COOKIE_DOMAIN=localhost

# ============================================
# DATABASE CONFIGURATION
# ============================================
# PostgreSQL connection string
# For local dev: use 'localhost'
# For Docker: use 'postgres' as hostname
# [CHANGE FOR PRODUCTION] Use strong password
DATABASE_URL=postgres://mobifaktura:mobifaktura_secret@localhost:5432/mobifaktura

# PostgreSQL credentials (only used by Docker)
# [CHANGE FOR PRODUCTION] Use strong passwords
POSTGRES_USER=mobifaktura
POSTGRES_PASSWORD=mobifaktura_secret
POSTGRES_DB=mobifaktura

# ============================================
# SEAWEEDFS S3 STORAGE CONFIGURATION
# ============================================
# S3-compatible object storage for file uploads
# For local dev: use 'localhost'
# For Docker: use 'seaweedfs-s3' as hostname
S3_ENDPOINT=localhost
S3_PORT=9000

# SeaweedFS S3 credentials
# [CHANGE FOR PRODUCTION] Use strong passwords
S3_ACCESS_KEY=mobifaktura_s3_internal
S3_SECRET_KEY=mobifaktura_s3_secret_key_2026

# S3 bucket configuration
S3_BUCKET=invoices
S3_USE_SSL=false

# ============================================
# AUTHENTICATION & SECURITY (CRITICAL!)
# ============================================

# JWT Secret - MUST be set before app starts!
# Generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# [CHANGE FOR PRODUCTION] Generate a new strong secret
# Current value is for development only
JWT_SECRET=dev-super-secret-jwt-key-min-32-chars-long-here

# Session cookie name
SESSION_COOKIE_NAME=mobifaktura_session

# ============================================
# EMERGENCY SUPER ADMIN (CRITICAL!)
# ============================================
# Used for emergency access when all admin accounts are locked/lost
# Access via /login - system validates credentials against these values
# [CHANGE FOR PRODUCTION] Use strong password, store securely
# SECURITY WARNING: Do NOT share these credentials, never commit real values
SUPER_ADMIN_EMAIL=emergency@yourdomain.com
SUPER_ADMIN_PASSWORD=YourSecurePassword123!

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: debug, info, warn, error
# Development: use 'debug' for more details
# Production: use 'info' or 'warn' for less noise
LOG_LEVEL=info

# ============================================
# KSEF INTEGRATION (Polish e-Invoice System)
# ============================================
# Default KSeF token (used when company-specific token not found)
# [CHANGE FOR PRODUCTION] Obtain from KSeF API portal
KSEF_TOKEN=your-default-ksef-token-here

# Company-specific KSeF tokens (optional)
# Format: KSEF_TOKEN_[NIP]=token
# Example for NIP 1234567890:
# KSEF_TOKEN_1234567890=company-specific-token-here

# KSeF Test Environment Tokens (for testing)
# These tokens are for the test/demo KSeF environment
KSEF_TOKEN_TEST=test-ksef-token-here
KSEF_TOKEN_DEMO=demo-ksef-token-here

# ===================================
# SETUP INSTRUCTIONS
# ===================================
#
# LOCAL DEVELOPMENT (this file):
# 1. Keep NODE_ENV=development
# 2. Use localhost values for COOKIE_DOMAIN, DATABASE_URL, S3_ENDPOINT
# 3. JWT_SECRET can stay as is
# 4. Run: npm run dev
#
# DOCKER DEVELOPMENT (docker-compose.dev.yml):
# 1. Keep NODE_ENV=development
# 2. DATABASE_URL: postgres://mobifaktura:mobifaktura_secret@postgres:5432/mobifaktura
# 3. S3_ENDPOINT: seaweedfs-s3
# 4. Run: docker-compose -f docker-compose.dev.yml up
#
# PRODUCTION (docker-compose.yml):
# 1. Change NODE_ENV=production
# 2. NEXT_PUBLIC_APP_URL: https://yourdomain.com
# 3. COOKIE_DOMAIN: yourdomain.com
# 4. DATABASE_URL: postgres://user:password@host:5432/mobifaktura (change password!)
# 5. S3_*: Update credentials and endpoint
# 6. JWT_SECRET: Generate new secure value
# 7. SUPER_ADMIN_*: Set real credentials
# 8. Run: docker-compose up -d
# ===================================
